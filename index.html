<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="TaskPro - Professional task management and productivity tool">
  <title>TaskPro - Task Management</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <a class="skip-link" href="#main-content">Skip to main content</a>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Primary navigation">
      <div class="logo">
        <h1>TaskPro</h1>
      </div>
      <nav class="project-nav">
        <div class="nav-section">
          <h3>Projects</h3>
          <button class="project-btn active" data-project="all" aria-current="page" title="All Tasks">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <rect x="4" y="6" width="16" height="2" rx="1"></rect>
                <rect x="4" y="11" width="16" height="2" rx="1"></rect>
                <rect x="4" y="16" width="16" height="2" rx="1"></rect>
              </svg>
            </span>
            <span class="label">All Tasks</span>
          </button>
          <button class="project-btn" data-project="work" title="Work">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M9 6h6v2h3a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3V6zm2 2V6h2v2h-2z"></path>
              </svg>
            </span>
            <span class="label">Work</span>
          </button>
          <button class="project-btn" data-project="personal" title="Personal">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <circle cx="12" cy="8" r="3"></circle>
                <path d="M4 20a8 8 0 0 1 16 0H4z"></path>
              </svg>
            </span>
            <span class="label">Personal</span>
          </button>
          <button class="project-btn" data-project="learning" title="Learning">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M12 3l9 5-9 5-9-5 9-5zm0 7l6.5-3.611V14.5a2.5 2.5 0 0 1-2.5 2.5H8a2.5 2.5 0 0 1-2.5-2.5V6.389L12 10z"></path>
              </svg>
            </span>
            <span class="label">Learning</span>
          </button>
        </div>
        <div class="nav-section">
          <h3>Views</h3>
          <button class="view-btn" data-view="today" title="Today">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v3M12 20v3M1 12h3M20 12h3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12"></path></svg>
            </span>
            <span class="label">Today</span>
          </button>
          <button class="view-btn" data-view="pending" title="Pending">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><circle cx="12" cy="12" r="10"></circle><path d="M12 7v6l4 2"></path></svg>
            </span>
            <span class="label">Pending</span>
          </button>
          <button class="view-btn" data-view="completed" title="Completed">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            </span>
            <span class="label">Completed</span>
          </button>
          <button class="view-btn" data-view="board" title="Board">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><rect x="3" y="4" width="5" height="16" rx="1"></rect><rect x="10" y="4" width="5" height="16" rx="1"></rect><rect x="17" y="4" width="4" height="16" rx="1"></rect></svg>
            </span>
            <span class="label">Board</span>
          </button>
          <button class="view-btn" data-view="calendar" title="Calendar">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><rect x="3" y="4" width="18" height="17" rx="2"></rect><rect x="3" y="8" width="18" height="4"></rect></svg>
            </span>
            <span class="label">Calendar</span>
          </button>
        </div>
      </nav>
      <div class="sidebar-footer">
        <button id="theme-toggle" class="theme-btn" title="Toggle dark mode" aria-pressed="false">üåô</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
      <!-- Header -->
      <header class="app-header">
        <div class="header-left">
          <h2 id="view-title">All Tasks</h2>
          <p id="view-subtitle"></p>
        </div>
        <div class="header-right">
          <div class="search-box">
            <input type="text" id="search-input" placeholder="Search tasks..." aria-label="Search">
            <span class="search-icon">üîç</span>
          </div>
          <div class="quick-add">
            <input type="text" id="quick-add-input" placeholder="Quick add: 'Design review tomorrow #work !high @ui'" aria-label="Quick add">
            <button id="quick-add-btn" class="btn btn-secondary" title="Quick add">Add</button>
          </div>
          <div class="header-actions">
            <button id="analytics-btn" class="btn btn-secondary" title="View analytics">üìä</button>
            <button id="export-btn" class="btn btn-secondary" title="Export a backup file" aria-label="Export backup">‚¨áÔ∏è Export</button>
            <button id="import-btn" class="btn btn-secondary" title="Import a backup file" aria-label="Import backup">‚¨ÜÔ∏è Import</button>
            <input type="file" id="import-file" accept=".json" style="display: none;">
          </div>
          <button id="sidebar-toggle" class="btn btn-secondary" title="Toggle sidebar" aria-pressed="false">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"></path></svg>
          </button>
          <button id="add-task-btn" class="btn btn-primary" aria-haspopup="dialog">+ New Task</button>
          <button id="density-toggle" class="btn btn-secondary" title="Toggle compact mode" aria-pressed="false">Compact</button>
        </div>
      </header>

      <!-- Stats Dashboard -->
      <section class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="stat-total">0</div>
          <div class="stat-label">Total Tasks</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-completed">0</div>
          <div class="stat-label">Completed</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-pending">0</div>
          <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-overdue">0</div>
          <div class="stat-label">Overdue</div>
        </div>
      </section>

      <!-- Filter & Sort Bar -->
      <div class="controls-bar">
        <div class="sort-controls">
          <button class="sort-btn active" data-sort="date">Due Date</button>
          <button class="sort-btn" data-sort="priority">Priority</button>
          <button class="sort-btn" data-sort="name">Name</button>
          <button class="sort-btn" data-sort="manual">Manual</button>
        </div>
        <div class="selection-bar" aria-label="Batch actions" role="group">
          <button id="select-mode-toggle" class="btn btn-secondary" title="Toggle selection mode">Select</button>
          <button id="select-all" class="btn btn-secondary" title="Select all visible">Select All</button>
          <button id="clear-selection" class="btn btn-secondary" title="Clear selection">Clear</button>
          <button id="bulk-complete" class="btn btn-secondary" title="Mark selected as complete">Complete</button>
          <button id="bulk-delete" class="btn btn-secondary" title="Delete selected tasks">Delete</button>
        </div>
      </div>

      <!-- Task List -->
      <div class="tasks-container">
        <!-- List View -->
        <ul id="task-list" class="task-list" role="list"></ul>
        <!-- Board View -->
        <div id="board-container" class="board-container" style="display: none;"></div>
        <!-- Calendar View -->
        <div id="calendar-container" class="calendar-container" style="display: none;"></div>
        <div id="empty-state" class="empty-state">
          <div class="empty-state-content">
            <h3>üìù No tasks yet</h3>
            <p>Create your first task to get organized and start earning XP!</p>
            <div class="empty-state-examples">
              <p class="empty-state-hint">Try creating tasks like:</p>
              <ul>
                <li>"Finish proposal tomorrow #work !high"</li>
                <li>"Review code today #work @backend"</li>
                <li>"Plan vacation next week #personal"</li>
              </ul>
            </div>
            <button id="empty-state-cta" class="btn btn-primary">+ Create First Task</button>
          </div>
        </div>
        <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>
      </div>
    </main>
  </div>

  <!-- Add/Edit Task Modal -->
  <div id="task-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">New Task</h3>
        <button class="close-btn" id="close-modal" aria-label="Close task modal">&times;</button>
      </div>
      <form id="task-form" novalidate>
        <div class="form-group">
          <label for="task-name">Task Name *</label>
          <input type="text" id="task-name" required placeholder="Enter task name" autofocus aria-describedby="task-name-error">
          <p class="input-error" id="task-name-error" role="alert"></p>
        </div>
        <div class="form-group">
          <label for="task-description">Description</label>
          <textarea id="task-description" placeholder="Add details (optional)" rows="3"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="task-priority">Priority</label>
            <select id="task-priority">
              <option value="Low">Low</option>
              <option value="Medium" selected>Medium</option>
              <option value="High">High</option>
            </select>
          </div>
          <div class="form-group">
            <label for="task-project">Project</label>
            <select id="task-project">
              <option value="work">Work</option>
              <option value="personal" selected>Personal</option>
              <option value="learning">Learning</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="task-status">Status</label>
            <select id="task-status">
              <option value="todo" selected>To Do</option>
              <option value="in_progress">In Progress</option>
              <option value="done">Done</option>
            </select>
          </div>
          <div class="form-group">
            <label for="task-recurrence">Recurrence</label>
            <select id="task-recurrence">
              <option value="none" selected>None</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="task-due-date">Due Date</label>
          <input type="date" id="task-due-date">
        </div>
        <div class="form-group">
          <label style="display: block; margin-bottom: 0.5rem;">Quick Date</label>
          <div class="quick-date-buttons">
            <button type="button" class="quick-date-btn" data-days="0" title="Set due date to today">Today</button>
            <button type="button" class="quick-date-btn" data-days="1" title="Set due date to tomorrow">Tomorrow</button>
            <button type="button" class="quick-date-btn" data-days="7" title="Set due date to next week">Next Week</button>
            <button type="button" class="quick-date-btn" data-days="0" id="clear-due-date" title="Clear due date">Clear</button>
          </div>
        </div>
        <div class="form-group">
          <label for="task-tags">Tags (comma separated)</label>
          <input type="text" id="task-tags" placeholder="e.g. urgent, backend, design">
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Task</button>
        </div>
      </form>
    </div>
  </div>

  
  <!-- Keyboard Shortcuts Modal -->
  <div id="shortcuts-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="shortcuts-heading">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="shortcuts-heading">‚å®Ô∏è Keyboard Shortcuts</h3>
        <button class="close-btn" id="close-shortcuts" aria-label="Close shortcuts">&times;</button>
      </div>
      <div class="shortcuts-content">
        <div class="shortcuts-group">
          <h4>Navigation</h4>
          <ul class="shortcuts-list">
            <li><kbd>?</kbd> or <kbd>Shift + ?</kbd> - Show this help</li>
            <li><kbd>Cmd/Ctrl + K</kbd> - Create new task</li>
            <li><kbd>Esc</kbd> - Close modal or cancel</li>
          </ul>
        </div>
        <div class="shortcuts-group">
          <h4>In Task Form</h4>
          <ul class="shortcuts-list">
            <li><kbd>Tab</kbd> - Move to next field</li>
            <li><kbd>Shift + Tab</kbd> - Move to previous field</li>
            <li><kbd>Enter</kbd> - Save task (when not in textarea)</li>
          </ul>
        </div>
        <div class="shortcuts-group">
          <h4>Quick Add Syntax</h4>
          <ul class="shortcuts-list">
            <li><code>#work</code> or <code>#personal</code> - Set project</li>
            <li><code>!high</code>, <code>!medium</code>, <code>!low</code> - Set priority</li>
            <li><code>@tag</code> - Add tag</li>
            <li><code>today</code>, <code>tomorrow</code>, <code>next week</code> - Due date</li>
            <li><code>daily</code>, <code>weekly</code>, <code>monthly</code> - Recurrence</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div id="analytics-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="analytics-heading">
    <div class="modal-content modal-wide">
      <div class="modal-header">
        <h3 id="analytics-heading">Analytics & Insights</h3>
        <button class="close-btn" id="close-analytics" aria-label="Close analytics">&times;</button>
      </div>
      <div class="analytics-content">
        <div class="analytics-grid">
          <div class="analytics-card">
            <h4>Completion Rate</h4>
            <div class="analytics-value" id="completion-rate">0%</div>
            <p class="analytics-label">of tasks completed</p>
          </div>
          <div class="analytics-card">
            <h4>Productivity Score</h4>
            <div class="analytics-value" id="productivity-score">0</div>
            <p class="analytics-label">out of 100</p>
          </div>
          <div class="analytics-card">
            <h4>Tasks This Week</h4>
            <div class="analytics-value" id="tasks-week">0</div>
            <p class="analytics-label">created or completed</p>
          </div>
          <div class="analytics-card">
            <h4>Avg Priority</h4>
            <div class="analytics-value" id="avg-priority">-</div>
            <p class="analytics-label">of pending tasks</p>
          </div>
        </div>
        <div class="analytics-details">
          <div class="analytics-section">
            <h4>Top Tags</h4>
            <div id="top-tags" class="tag-list"></div>
          </div>
          <div class="analytics-section">
            <h4>Project Breakdown</h4>
            <div id="project-breakdown" class="breakdown-list"></div>
          </div>
          <div class="analytics-section">
            <h4>Gamification</h4>
            <div id="gamification-summary" class="gamification-summary"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./src/main.js"></script>
</body>

</html>